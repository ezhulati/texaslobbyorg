---
import Layout from '@/components/astro/Layout.astro';
import { supabase } from '@/lib/supabase';

// In the future, this will pull from a database or content collection
// For now, we'll manually list blog posts
const blogPosts = [
  {
    slug: 'complete-directory-texas-lobbying-firms-2025',
    title: 'Complete Directory of Texas Lobbying Firms: 64 Verified Operations (2025)',
    description: 'The definitive guide to Texas lobbying firms with verified websites, Capitol Inside rankings, and complete contact information. From HillCo Partners to boutique specialists - every major firm operating at the Texas Capitol.',
    category: 'Industry News',
    author: 'TexasLobby.org Research Team',
    publishedDate: '2025-11-11',
    readTime: '45 min read',
    featured: true,
  },
  {
    slug: '89th-legislature-recap-what-passed-failed-and-why',
    title: '89th Texas Legislature Recap: What Passed, What Failed, and Who Won',
    description: 'Insider analysis of the 89th Legislature - which bills passed, which died, and the power dynamics that determined everything. By Byron Campbell, Texas Lobbyist.',
    category: 'Legislative Analysis',
    author: 'Byron Campbell, Texas Lobbyist',
    publishedDate: '2025-06-10',
    readTime: '18 min read',
    featured: false,
  },
  {
    slug: '89th-legislature-preview-top-bills-to-watch',
    title: '89th Texas Legislature: Top 10 Bills Every Business Should Watch',
    description: 'The 89th Texas Legislature convenes in January 2025. Here are the most impactful bills that could reshape your industry, from healthcare reform to energy policy.',
    category: 'Legislative Analysis',
    author: 'Byron Campbell, Texas Lobbyist',
    publishedDate: '2025-01-06',
    readTime: '18 min read',
    featured: false,
  },
  {
    slug: 'when-should-your-business-hire-a-lobbyist',
    title: 'When Should Your Texas Business Hire a Lobbyist? The 7 Signals You Can\'t Ignore',
    description: 'The typical mistake: waiting until a bill threatens your operations before hiring a lobbyist. By then, you\'ve missed the most effective window for influence and tripled your costs.',
    category: 'Strategy',
    author: 'Byron Campbell, Texas Lobbyist',
    publishedDate: '2025-01-03',
    readTime: '10 min read',
    featured: false,
  },
];

const categories = [
  { name: 'All Posts', slug: 'all', count: blogPosts.length },
  { name: 'Legislative Analysis', slug: 'legislative-analysis', count: 2 },
  { name: 'Strategy', slug: 'strategy', count: 1 },
  { name: 'Industry News', slug: 'industry-news', count: 1 },
  { name: 'Case Studies', slug: 'case-studies', count: 0 },
];

const selectedCategory = Astro.url.searchParams.get('category') || 'all';
const filteredPosts = selectedCategory === 'all'
  ? blogPosts
  : blogPosts.filter(post => post.category.toLowerCase().replace(/\s+/g, '-') === selectedCategory);

// SEO
const pageTitle = 'Texas Lobbying Blog | Insights, Analysis & Legislative Updates';
const pageDescription = 'Expert insights on Texas lobbying, legislative analysis, industry trends, and government relations strategies. Stay informed on what\'s happening in Austin.';
---

<Layout title={pageTitle} description={pageDescription}>
  <!-- Hero Section -->
  <section class="bg-gradient-to-b from-texas-blue-500/10 to-background py-16 border-b border-border">
    <div class="container">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">
          Texas Lobbying Insights
        </h1>
        <p class="text-xl text-muted-foreground mb-8">
          Legislative analysis, industry trends, and government relations strategies from the heart of Texas politics
        </p>
      </div>
    </div>
  </section>

  <!-- Categories -->
  <section class="py-8 border-b border-border bg-muted/30">
    <div class="container">
      <div class="max-w-6xl mx-auto">
        <div class="flex flex-wrap gap-3 justify-center">
          {categories.map((cat) => (
            <a
              href={cat.slug === 'all' ? '/blog' : `/blog?category=${cat.slug}`}
              class={`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${
                selectedCategory === cat.slug
                  ? 'bg-texas-blue-500 text-white'
                  : 'bg-white border border-border hover:border-texas-blue-500'
              }`}
            >
              {cat.name}
              <span class="text-xs opacity-75">({cat.count})</span>
            </a>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Blog Posts -->
  <section class="py-16">
    <div class="container">
      <div class="max-w-6xl mx-auto">
        {filteredPosts.length === 0 ? (
          <div class="text-center py-16">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4">
              <svg class="w-8 h-8 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
            </div>
            <h2 class="text-2xl font-bold mb-2">No posts in this category yet</h2>
            <p class="text-muted-foreground mb-6">Check back soon for new content</p>
            <a href="/blog" class="text-texas-blue-500 hover:underline">View all posts</a>
          </div>
        ) : (
          <div class="grid gap-8">
            {filteredPosts.map((post, index) => (
              <article class={`bg-white rounded-lg border border-border overflow-hidden hover:shadow-lg transition-shadow ${
                post.featured && index === 0 ? 'md:grid md:grid-cols-2' : ''
              }`}>
                {post.featured && index === 0 && (
                  <div class="bg-gradient-to-br from-texas-blue-500 to-texas-blue-600 p-12 flex items-center justify-center">
                    <div class="text-center">
                      <div class="inline-flex items-center rounded-full bg-white/20 px-4 py-2 text-sm font-medium text-white mb-4">
                        Featured
                      </div>
                      <svg class="w-24 h-24 text-white/30 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
                      </svg>
                    </div>
                  </div>
                )}
                <div class="p-8">
                  <div class="flex items-center gap-3 mb-4">
                    <span class="inline-flex items-center rounded-full bg-texas-blue-500/10 px-3 py-1 text-xs font-medium text-texas-blue-700">
                      {post.category}
                    </span>
                    <span class="text-sm text-muted-foreground">{post.readTime}</span>
                  </div>

                  <h2 class="text-2xl md:text-3xl font-bold mb-3 hover:text-texas-blue-500 transition-colors">
                    <a href={`/blog/${post.slug}`}>
                      {post.title}
                    </a>
                  </h2>

                  <p class="text-muted-foreground mb-4">
                    {post.description}
                  </p>

                  <div class="flex items-center justify-between pt-4 border-t border-border">
                    <div class="text-sm text-muted-foreground">
                      {new Date(post.publishedDate).toLocaleDateString('en-US', {
                        month: 'long',
                        day: 'numeric',
                        year: 'numeric'
                      })}
                    </div>
                    <a
                      href={`/blog/${post.slug}`}
                      class="inline-flex items-center text-texas-blue-500 hover:text-texas-blue-600 font-medium text-sm"
                    >
                      Read article
                      <svg class="ml-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                      </svg>
                    </a>
                  </div>
                </div>
              </article>
            ))}
          </div>
        )}
      </div>
    </div>
  </section>

  <!-- Newsletter CTA -->
  <section class="py-16 bg-gradient-to-br from-texas-blue-500 to-texas-blue-600 text-white">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl font-bold mb-4">Stay Informed on Texas Politics</h2>
        <p class="text-xl text-blue-50 mb-8">
          Get legislative updates, lobbying insights, and industry analysis delivered to your inbox
        </p>
        <div class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
          <input
            type="email"
            placeholder="Enter your email"
            class="flex-1 px-4 py-3 rounded-md text-foreground"
          />
          <button class="px-6 py-3 bg-white text-texas-blue-600 font-medium rounded-md hover:bg-gray-100 transition-colors">
            Subscribe
          </button>
        </div>
        <p class="text-xs text-blue-100 mt-4">
          No spam. Unsubscribe anytime.
        </p>
      </div>
    </div>
  </section>
</Layout>
